import json
import matplotlib.pyplot as plt
from matplotlib.patches import Polygon
from PIL import Image

# Load JSON file containing segmentation points
with open('segmentation.json', 'r') as f:
    data = json.load(f)

# Load the image
img = Image.open('image_path.jpg')

# Rotate the image by 90 degrees
img_rotated = img.rotate(90, expand=True)

# Get image size after rotation
width, height = img_rotated.size

# Plot the rotated image
plt.imshow(img_rotated)

# Iterate through each shape in the JSON file
for shape in data['shapes']:
    label = shape['label']
    points = shape['points']

    # Rotate the points for the new image size
    rotated_points = [(height - point[1], point[0]) for point in points]

    # Plot rotated bounding box
    poly = Polygon(rotated_points, edgecolor='r', facecolor='none', closed=True, linewidth=2)
    plt.gca().add_patch(poly)
    plt.text(rotated_points[0][0], rotated_points[0][1], label, color='r', fontsize=12, ha='center')

plt.axis('off')  # turn off axis
plt.show()
