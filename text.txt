import os
import shutil

# Define the paths
input_base_path = 'crops'
output_path = 'output'

# Create the output directory if it doesn't exist
if not os.path.exists(output_path):
    os.makedirs(output_path)

# Iterate over each category folder
for category in os.listdir(input_base_path):
    category_path = os.path.join(input_base_path, category)
    
    # Ensure the current path is a directory
    if os.path.isdir(category_path):
        # Iterate over each file in the category folder
        for filename in os.listdir(category_path):
            file_path = os.path.join(category_path, filename)
            
            # Check if it's a file
            if os.path.isfile(file_path):
                # Construct the new filename
                new_filename = f"{category}_{filename}"
                new_file_path = os.path.join(output_path, new_filename)
                
                # Move and rename the file
                shutil.move(file_path, new_file_path)
                
print("All files have been moved and renamed.")
